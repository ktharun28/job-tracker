<!DOCTYPE html>
<html>
<head>
    <title>Job Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<div class="page">

    <h1>Job Tracker</h1>

<div class="card">
    <h2>Dashboard</h2>

    <div class="job-list">
        <a href="/jobs?status=Applied">Applied (<%= counts.Applied %>)</a>
        <a href="/jobs?status=Interview">Interview (<%= counts.Interview %>)</a>
        <a href="/jobs?status=Offer">Offer (<%= counts.Offer %>)</a>
        <a href="/jobs?status=Rejected">Rejected (<%= counts.Rejected %>)</a>
        <a href="/jobs">All</a>
    </div>
</div>


    <div class="card">
        <h2>Add Job</h2>

        <form method="POST" action="/jobs">
            <input type="text" name="company" placeholder="Company" required />
            <input type="text" name="role" placeholder="Role" required />

            <select name="status">
                <option>Applied</option>
                <option>Interview</option>
                <option>Offer</option>
                <option>Rejected</option>
            </select>

            <button type="submit">Add Job</button>
        </form>
    </div>

    <div class="card">
        <h2>My Jobs</h2>

        <% if (jobs.length === 0) { %>
            <p>No jobs added yet.</p>
        <% } else { %>
            <div class="job-list">
                <% jobs.forEach(job => { %>

                    <div class="job-item">
                        <div class="job-details">
                            <strong><%= job.company %></strong>
                            <span><%= job.role %> â€¢ <%= job.status %></span>
                        </div>

                        <div class="actions">
                            <a href="/jobs/<%= job.id %>/edit">Edit</a>

                            <form method="POST"
                                  action="/jobs/<%= job.id %>/delete">
                                <button type="submit">Delete</button>
                            </form>
                        </div>
                    </div>

                    <form method="POST" action="/ai/insight">
                        <input type="hidden" name="company" value="<%= job.company %>">
                        <input type="hidden" name="role" value="<%= job.role %>">
                        <input type="hidden" name="status" value="<%= job.status %>">
                        <button type="submit">AI Insight</button>
                    </form>
                    
                <% }) %>
            </div>
        <% } %>
    </div>


    <div class="footer">
        <a href="/jobs/export">Export to Excel</a>
        &nbsp; | &nbsp;
        <a href="/logout">Logout</a>
    </div>


</div>

</body>
</html>
